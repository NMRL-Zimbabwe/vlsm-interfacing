<br>
<main role="main" class="container">
  <div class="card">
    <div class="card-header">
      <h4>System Settings</h4>
    </div>

    <div class="card-body">

      <form (submit)="updateSettings()" class="form" ngNativeValidate>
        <div class="card text-bg-light">
          <div class="card-body">
            <div class="row">
              <div class="form-group col col-sm-6">
                <label for="labID" class="col-form-label-sm">Testing Lab Code/ID</label>
                <input type="text" [(ngModel)]="commonSettings.labID" name="labID" class="form-control form-control-sm"
                  placeholder="Lab Code/ID" required />
              </div>
              <div class="form-group col col-sm-6">
                <label for="labName" class="col-form-label-sm">Testing Lab Name</label>
                <input type="text" [(ngModel)]="commonSettings.labName" name="labName"
                  class="form-control form-control-sm" placeholder="Lab Name" required />
              </div>

              <div class="form-group col col-sm-6">
                <label for="interfaceAutoConnect" class="col-form-label-sm">Should the interface attempt to
                  autoconnect?</label>
                <select [(ngModel)]="commonSettings.interfaceAutoConnect" name="interfaceAutoConnect"
                  class="form-control form-control-sm" required>
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>
              <div class="form-group col col-sm-6">
                <label for="appPath" class="col-form-label-sm">SQLite DB Path</label>
                <p class="form-control-static small text-muted">{{appPath}}</p>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="card text-bg-light">
          <div class="card-body">
            <h5 class="card-title">MySQL Configuration</h5>

            <div class="row">
              <div class="form-group col col-sm-6">
                <label for="mysqlHost" class="col-form-label-sm">MySQL Host</label>
                <input type="text" [(ngModel)]="commonSettings.mysqlHost" name="mysqlHost"
                  class="form-control form-control-sm" placeholder="MySQL Hostname">
              </div>
              <div class="form-group col col-sm-6">
                <label for="mysqlPort" class="col-form-label-sm">MySQL Port</label>
                <input type="text" [(ngModel)]="commonSettings.mysqlPort" name="mysqlPort"
                  class="form-control form-control-sm" placeholder="MySQL Port Number">
              </div>
              <div class="form-group col col-sm-6">
                <label for="mysqlDb" class="col-form-label-sm">MySQL DB Name</label>
                <input type="text" [(ngModel)]="commonSettings.mysqlDb" name="mysqlDb"
                  class="form-control form-control-sm" placeholder="MySQL DB Name">
              </div>
              <div class="form-group col col-sm-6">
                <label for="mysqlUser" class="col-form-label-sm">MySQL DB User</label>
                <input type="text" [(ngModel)]="commonSettings.mysqlUser" name="mysqlUser"
                  class="form-control form-control-sm" placeholder="MySQL DB User">
              </div>
              <div class="form-group col col-sm-6">
                <label for="mysqlPassword" class="col-form-label-sm">MySQL DB Password</label>
                <input type="text" [(ngModel)]="commonSettings.mysqlPassword" name="mysqlPassword"
                  class="form-control form-control-sm" placeholder="MySQL DB Password">
              </div>
              <div class="form-group col col-sm-6">
                <label for="" class="col-form-label-sm">&nbsp;&nbsp;</label><br>
                <button (click)="checkMysqlConnection()" class="btn btn-dark btn-sm" type="button">Check MySQL
                  Connection</button>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="card text-bg-light">
          <div class="card-body">
            <h5 class="card-title">Instruments Configuration</h5>
            <div class="row">
              <div class="form-group col col-sm-6">
                <label for="analyzerMachineType" class="col-form-label-sm">Analyzer/Machine Type</label>
                <select [(ngModel)]="instrumentsSettings[0].analyzerMachineType" name="analyzerMachineType"
                  class="form-control form-control-sm" required>
                  <optgroup label="Roche">
                    <option value="roche-cobas-taqman">Roche Cobas Taqman</option>
                    <option value="roche-cobas-4800">Roche Cobas 4800</option>
                    <option value="roche-cobas-6800">Roche Cobas 6800/8800</option>
                  </optgroup>
                  <optgroup label="Abbott">
                    <option value="abbott-m2000">Abbott m2000</option>
                    <option value="abbott-alinity-m">Abbott Alinity M</option>
                  </optgroup>
                  <optgroup label="Cepheid">
                    <option value="cepheid-genexpert">Cepheid GeneXpert</option>
                  </optgroup>
                  <optgroup label="Other">
                    <option value="other-astm">Other ASTM</option>
                    <option value="other-astm-concatenated">Other ASTM Concatenated</option>
                    <option value="other-hl7">Other HL7</option>
                  </optgroup>
                </select>
              </div>

              <div class="form-group col col-sm-6">
                <label for="interfaceCommunicationProtocol" class="col-form-label-sm">Interface Communication
                  Protocol</label>
                <select [(ngModel)]="instrumentsSettings[0].interfaceCommunicationProtocol"
                  name="interfaceCommunicationProtocol" class="form-control form-control-sm" required>
                  <option value="astm-elecsys">ASTM/Elecsys (Single Record)</option>
                  <option value="astm-concatenated">ASTM (Concatenated)</option>
                  <option value="hl7">HL7</option>
                </select>
              </div>
              <div class="form-group col col-sm-6">
                <label for="analyzerMachineName" class="col-form-label-sm">Instrument Name/Code assigned by
                  Testing Lab</label>
                <input type="text" [(ngModel)]="instrumentsSettings[0].analyzerMachineName" name="analyzerMachineName"
                  class="form-control form-control-sm" placeholder="eg. Roche Cobas48" required>
              </div>
              <div class="form-group col col-sm-6">
                <label for="analyzerMachineHost" class="col-form-label-sm">Instrument IP Address</label>
                <input type="text" [(ngModel)]="instrumentsSettings[0].analyzerMachineHost" name="analyzerMachineHost"
                  class="form-control form-control-sm" placeholder="eg. 198.1.1.1" required>
              </div>
              <div class="form-group col col-sm-6">
                <label for="analyzerMachinePort" class="col-form-label-sm">Instrument Port number</label>
                <input type="text" [(ngModel)]="instrumentsSettings[0].analyzerMachinePort" name="analyzerMachinePort"
                  class="form-control form-control-sm" placeholder="eg. 3120" required>
              </div>
              <div class="form-group col col-sm-6">
                <label for="interfaceConnectionMode" class="col-form-label-sm">This Interface Tool is a</label>
                <select [(ngModel)]="instrumentsSettings[0].interfaceConnectionMode" name="interfaceConnectionMode"
                  class="form-control form-control-sm" required>
                  <option value="tcpserver">Server (TCP/IP)</option>
                  <option value="tcpclient">Client (TCP/IP)</option>
                </select>
              </div>

            </div>
          </div>
        </div>

        <br>




        <button class="btn btn-primary" type="submit">Save Settings</button>
        &nbsp;
        <button routerLink="/dashboard" class="btn btn-danger" type="button">
          <span>Back without saving</span>
        </button>
      </form>


    </div>
  </div>
  <small class="float-end" *ngIf="appVersion">v{{appVersion}}</small>

</main>
